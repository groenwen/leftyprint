"use strict";(self["webpackChunkleftyprint"]=self["webpackChunkleftyprint"]||[]).push([[437],{4751:function(t,e,s){function i(t){return{all:t=t||new Map,on:function(e,s){var i=t.get(e);i?i.push(s):t.set(e,[s])},off:function(e,s){var i=t.get(e);i&&(s?i.splice(i.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var i=t.get(e);i&&i.slice().map((function(t){t(s)})),(i=t.get("*"))&&i.slice().map((function(t){t(e,s)}))}}}s.d(e,{Z:function(){return l}});const r=i();var l=r},9802:function(t,e,s){s.d(e,{Z:function(){return c}});var i=s(6252);function r(t,e,s,r,l,o){return(0,i.wg)(),(0,i.iD)("div")}var l=s(4751),o={data(){return{data:{position:"top",toast:!0,icon:"success",title:"",showConfirmButton:!1,timer:1500}}},methods:{showAlert(t){this.$swal(t)}},mounted(){l.Z.on("sweetalert",(t=>{const e=t.split(", ");this.data.title=e[0],this.data.icon=e[1],this.$swal.fire(this.data)}))},unmounted(){l.Z.off("sweetalert")}},n=s(3744);const a=(0,n.Z)(o,[["render",r]]);var c=a},7974:function(t,e,s){s.r(e),s.d(e,{default:function(){return lt}});var i=s(6252),r=s(3577),l=s(9963),o=s(5689);const n={class:"mb-5 bg-light"},a={class:"container py-4"},c={class:"row justify-content-between"},d={class:"col-5 align-self-center py-5"},u={class:"align-content-center pb-4 mb-5 border-bottom"},h={class:"mb-3 d-inline-block px-3 py-2 fs-8 lh-1 text-white bg-secondary rounded-pill position-relative"},p={class:"mb-3 fs-2"},m={class:"d-flex"},f={class:"d-flex align-items-center me-5"},g=(0,i._)("span",{class:"material-symbols-outlined fs-1 text-primary me-3"},"calendar_month",-1),_={class:"d-flex flex-column justify-content-center"},v=(0,i._)("span",{class:"fs-8 lh-1 mb-2 text-primary"},"工作天數",-1),b={class:"lh-1"},w={class:"d-flex align-items-center"},y=(0,i._)("span",{class:"material-symbols-outlined fs-1 text-primary me-3"},"cloud_download",-1),x={class:"d-flex flex-column justify-content-center"},P=(0,i._)("span",{class:"fs-8 lh-1 mb-2 text-primary"},"版型下載",-1),z={class:"lh-1"},k={class:"col-6"},S={class:"container"},$=(0,i._)("p",{class:"mb-4 text-secondary fs-5"},[(0,i._)("span",{class:"material-symbols-outlined me-2 fs-2 align-text-bottom"},"style"),(0,i.Uk)("選擇規格")],-1),C={class:"mb-4"},L=(0,i._)("span",{class:"me-3 mb-1 fs-7 text-secondary"},"尺寸  ",-1),A=["onClick"],Z={class:"mb-5"},j=(0,i._)("span",{class:"me-3 mb-1 fs-7 text-secondary"},"單/雙面",-1),q=["onClick"],D={class:"mb-4 position-relative",style:{"min-height":"100px"}},U={class:"bg-light px-4 py-3"},F={class:"table table-hover"},M=(0,i._)("thead",null,[(0,i._)("tr",{class:"text-secondary"},[(0,i._)("th",null,"尺寸"),(0,i._)("th",null,"單 / 雙面"),(0,i._)("th",null,"材質"),(0,i._)("th",null,"數量"),(0,i._)("th",null,"價格")])],-1),Y={class:"text-primary"},E={class:"text-primary"},K={class:"text-primary"},O=(0,i.Uk)(" $"),H={class:"pb-4"},W={class:"row justify-content-end"},I=(0,i._)("div",{class:"col-auto"},[(0,i._)("label",{for:"formFile",class:"col-form-label"},"上傳檔案")],-1),N={class:"col-auto"},T={class:"mb-5 pt-5 text-end border-top"},V=(0,i._)("span",{class:"me-3 px-4 py-1 fs-7 rounded-pill bg-gray-200 text-secondary"},"規格",-1),Q={class:"me-4 text-danger align-middle"},B=(0,i.Uk)("NT$"),J={class:"fs-2 fw-bold"},R=(0,i.uE)('<div class="d-flex justify-content-center align-items-center"><div class="text-center me-5"><img src="'+o+'" height="100" class="mb-3" alt=""><p>印刷注意事項</p></div><div class="p-4 border border-secondary rounded-3"><ul class="small mb-0"><li>圖檔解析度請設定300dpi，色彩模式為CMYK</li><li>完稿的檔案須包含出血尺寸。</li><li>紫色、咖啡色為敏感色，只要CMYK其中一色誤差時，視覺顏色就會有明顯差異。</li></ul></div></div>',1);function X(t,e,s,o,X,G){const tt=(0,i.up)("v-loading"),et=(0,i.up)("SweetAlert"),st=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(tt,{active:X.isLoading},null,8,["active"]),(0,i.Wm)(et),(0,i._)("div",n,[(0,i._)("div",a,[(0,i._)("div",c,[(0,i._)("div",d,[(0,i._)("div",u,[(0,i._)("span",h,(0,r.zw)(X.currProd.category),1),(0,i._)("h1",p,(0,r.zw)(X.currProd.title),1),(0,i._)("p",null,(0,r.zw)(X.currProd.content),1)]),(0,i._)("div",m,[(0,i._)("div",f,[g,(0,i._)("div",_,[v,(0,i._)("span",b,(0,r.zw)(X.currProd.description),1)])]),(0,i._)("div",w,[y,(0,i._)("div",x,[P,(0,i._)("span",z,(0,r.zw)(X.currProd.description),1)])])])]),(0,i._)("div",k,[(0,i._)("div",{class:"bg-cover h-100",style:(0,r.j5)({backgroundImage:`url(${X.currProd.imageUrl})`})},null,4)])])])]),(0,i._)("div",S,[$,(0,i._)("div",C,[L,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(X.sizeList,((t,e)=>((0,i.wg)(),(0,i.iD)("a",{href:"#",key:`size${e}`,onClick:(0,l.iM)((e=>G.checkSizeAndSide("size",t)),["prevent"]),class:(0,r.C_)(["btn btn-sm rounded-pill me-2",[this.currSize===t?"btn-dark":"btn-outline-dark"]])},(0,r.zw)(t),11,A)))),128))]),(0,i._)("div",Z,[j,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(X.sideList,((t,e)=>((0,i.wg)(),(0,i.iD)("a",{href:"#",key:`side${e}`,onClick:(0,l.iM)((e=>G.checkSizeAndSide("side",t)),["prevent"]),class:(0,r.C_)(["btn btn-sm rounded-pill me-2",[this.currProd.side===t?"btn-dark":"btn-outline-dark"]])},(0,r.zw)(t),11,q)))),128))]),(0,i._)("div",D,[(0,i.Wm)(tt,{active:X.isLoading},null,8,["active"]),(0,i._)("div",U,[(0,i._)("table",F,[M,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(X.sortProds,(t=>((0,i.wg)(),(0,i.iD)("tr",{key:t.id,class:(0,r.C_)([{"bg-white":this.currProd.id===t.id},"position-relative"])},[(0,i._)("th",null,(0,r.zw)(t.width)+"x"+(0,r.zw)(t.height)+"mm",1),(0,i._)("td",null,(0,r.zw)(t.side),1),(0,i._)("td",Y,(0,r.zw)(t.material),1),(0,i._)("td",E,(0,r.zw)(t.p_qty)+" "+(0,r.zw)(t.unit),1),(0,i._)("td",K,[O,(0,i.Wm)(st,{to:`/product/${t.id}`,class:"fw-bolder stretched-link"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(t.price),1)])),_:2},1032,["to"])])],2)))),128))])])])]),(0,i._)("div",H,[(0,i._)("form",{onSubmit:e[1]||(e[1]=(0,l.iM)(((...t)=>G.uploadFile&&G.uploadFile(...t)),["prevent"]))},[(0,i._)("div",W,[I,(0,i._)("div",N,[(0,i._)("input",{class:"form-control",type:"file",id:"formFile",onChange:e[0]||(e[0]=(...t)=>G.choseFile&&G.choseFile(...t))},null,32)])])],32)]),(0,i._)("div",T,[(0,i._)("p",null,[V,(0,i.Uk)(" "+(0,r.zw)(X.currProd.width)+"x"+(0,r.zw)(X.currProd.height)+" mm ／ "+(0,r.zw)(X.currProd.side)+" ／ "+(0,r.zw)(X.currProd.material)+" ／ "+(0,r.zw)(X.currProd.p_qty)+" 張 ",1)]),(0,i._)("span",Q,[B,(0,i._)("span",J,(0,r.zw)(X.currProd.price),1)]),(0,i._)("a",{href:"#",class:(0,r.C_)(["btn btn-primary",{disabled:void 0===this.file.name}]),onClick:e[2]||(e[2]=(0,l.iM)((t=>G.addToCart()),["prevent"]))},"加入購物車",2)]),R])],64)}var G=s.p+"img/demo.5adcd0bc.jpg",tt=s(4751),et=s(9802),st={data(){return{isLoading:!1,VUE_APP:"https://vue3-course-api.hexschool.io/v2/api/groen",currProd:{},currProds:[],sortProds:[],currSize:"",currSide:"",carts:[],sizeList:[],sideList:[],file:{}}},computed:{prodId(){return this.$route.params.id}},watch:{prodId(){this.getProds()}},components:{SweetAlert:et.Z},methods:{getProds(){this.isLoading=!0;const t=`${this.VUE_APP}/products/all`;this.$http.get(t).then((t=>{this.isLoading=!1;const e=t.data.products;this.currProd=e.find((t=>t.id===this.prodId)),this.currSize=`${this.currProd.width}x${this.currProd.height}`,this.currSide=this.currProd.side,this.currProds=e.filter((t=>t.title===this.currProd.title)),this.showSizeAndSide(),this.getSortProds()})).catch((t=>{tt.Z.emit("sweetalert",`${t.response.data.message}, error`)}))},checkSizeAndSide(t,e){if("size"===t){const t=e.split("x");this.currSize=`${t[0]}x${t[1]}`}else"side"===t&&(this.currSide=e);this.getSortProds(),this.currProd={...this.sortProds[0]},this.$router.push(`/product/${this.currProd.id}`)},getSortProds(){const t=this.currProds.filter(((t,e)=>{const s=this.currSize.split("x");return t.width===Number(s[0])&&t.height===Number(s[1])&&t.side===this.currSide})),e=t.map(((t,e)=>({index:e,value:t})));e.sort(((t,e)=>t.value.p_qty>e.value.p_qty?1:t.value.p_qty<e.value.p_qty?-1:0)),this.sortProds=e.map((e=>t[e.index]))},showSizeAndSide(){const t=this.currProds.map((t=>`${t.width}x${t.height}`)),e=this.currProds.map((t=>t.side));this.sizeList=t.filter(((e,s)=>t.indexOf(e)===s)),this.sizeList.sort(),this.sideList=e.filter(((t,s)=>e.indexOf(t)===s)),this.sideList.sort()},shallowEqual(t,e){const s=Object.keys(t),i=Object.keys(e);if(s.length!==i.length)return!1;for(let r=0;r<=s.length;r++){const l=t[s[r]],o=e[i[r]];if(l!==o)return!1}return!0},addToCart(){this.isLoading=!0;const t=`${this.VUE_APP}/cart`;this.$http.post(t,{data:{product_id:this.currProd.id,qty:1,files:[{id:0,front:G}]}}).then((t=>{this.isLoading=!1,tt.Z.emit("cartCount"),tt.Z.emit("sweetalert",`${t.data.message}, success`)})).catch((t=>{this.isLoading=!1,tt.Z.emit("sweetalert",`${t.response.data.message}, error`)}))},choseFile(t){this.file=t.target.files[0],console.log(this.file.name.length>0,"{}")},uploadFile(){const t="https://script.google.com/macros/s/AKfycbwuS2QeYvec72MZrQTPElC07XE1ntHm3tepY2ySf44qWRNvy_J9vADKZveVQ93dzhO8/exec";this.$http.post(t,this.file,{headers:{"content-type":"text/plain; charset=utf-8"}}).then((t=>{console.log(t)})).catch((t=>{console.log(t)}))}},mounted(){this.getProds()}},it=s(3744);const rt=(0,it.Z)(st,[["render",X]]);var lt=rt},5689:function(t,e,s){t.exports=s.p+"img/people03.128798c0.svg"}}]);
//# sourceMappingURL=437.4e34bf91.js.map