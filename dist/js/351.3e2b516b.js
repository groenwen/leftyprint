"use strict";(self["webpackChunkleftyprint"]=self["webpackChunkleftyprint"]||[]).push([[351],{7351:function(e,l,t){t.r(l),t.d(l,{default:function(){return H}});var a=t(6252),s=t(3577);const r={class:"container"},n=(0,a._)("p",null,"Carts",-1),o={class:"text-end"},d=["disabled"],c={key:0,class:"text-secondary"},i={key:1,class:"table mb-5"},u=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("td",null,"Category"),(0,a._)("td",null,"Title"),(0,a._)("td",null,"單/雙面"),(0,a._)("td",null,"尺寸"),(0,a._)("td",null,"材質"),(0,a._)("td",null,"張數"),(0,a._)("td",null,"單價"),(0,a._)("td",null,"總數"),(0,a._)("td",null,"特價"),(0,a._)("td")])],-1),m=["src"],p={class:"badge text-bg-secondary"},_=(0,a._)("br",null,null,-1),h=(0,a._)("br",null,null,-1),b={class:"small text-secondary"},g=["onClick"],f={class:"row justify-content-center"},v={class:"col-8"},w=(0,a._)("h3",null,"收件人",-1),y={class:"mb-3"},C=(0,a._)("label",{for:"name",class:"form-label"},"姓名",-1),k={class:"mb-3"},V=(0,a._)("label",{for:"email",class:"form-label"},"Email",-1),x={class:"mb-3"},z=(0,a._)("label",{for:"tel",class:"form-label"},"電話",-1),W={class:"mb-3"},$=(0,a._)("label",{for:"address",class:"form-label"},"地址",-1),q={class:"mb-3"},U=(0,a._)("label",{for:"message",class:"form-label"},"訂單備註",-1),D=(0,a._)("button",{type:"submit",class:"btn btn-primary"},"結帳",-1);function S(e,l,t,S,E,j){const F=(0,a.up)("v-field"),H=(0,a.up)("error-message"),K=(0,a.up)("v-form");return(0,a.wg)(),(0,a.iD)("div",r,[n,(0,a._)("div",o,[(0,a._)("button",{class:"btn btn-sm btn-secondary",onClick:l[0]||(l[0]=e=>j.clearCarts()),disabled:E.carts.length<=0},"清除購物車",8,d)]),(0,a._)("div",null,[E.carts.length<=0?((0,a.wg)(),(0,a.iD)("p",c,"購物車尚無內容")):((0,a.wg)(),(0,a.iD)("table",i,[u,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(E.carts,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",null,[(0,a._)("img",{src:e.file,height:"120",alt:""},null,8,m)]),(0,a._)("td",null,[(0,a._)("span",p,(0,s.zw)(e.product.category),1),_,(0,a.Uk)(" "+(0,s.zw)(e.product.title)+" ",1),h,(0,a._)("span",b,(0,s.zw)(e.product.id),1)]),(0,a._)("td",null,(0,s.zw)(e.product.content.side),1),(0,a._)("td",null,(0,s.zw)(e.product.content.width)+" mm X "+(0,s.zw)(e.product.content.height)+" mm",1),(0,a._)("td",null,(0,s.zw)(e.product.content.material),1),(0,a._)("td",null,(0,s.zw)(e.product.content.qty)+" "+(0,s.zw)(e.product.unit),1),(0,a._)("td",null,"$ "+(0,s.zw)(e.product.price),1),(0,a._)("td",null,(0,s.zw)(e.qty),1),(0,a._)("td",null,"$ "+(0,s.zw)(e.total),1),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-sm btn-outline-secondary",onClick:l=>j.delCart(e.id)},"刪除",8,g)])])))),128))])]))]),(0,a._)("div",f,[(0,a._)("div",v,[w,(0,a.Wm)(K,{ref:"form",onSubmit:j.onSubmit},{default:(0,a.w5)((({errors:e})=>[(0,a._)("div",y,[C,(0,a.Wm)(F,{name:"姓名",id:"name",type:"text",rules:"required",class:(0,s.C_)(["form-control",{"is-invalid":e["姓名"]}]),modelValue:E.order.user.name,"onUpdate:modelValue":l[1]||(l[1]=e=>E.order.user.name=e),placeholder:"填入姓名"},null,8,["class","modelValue"]),(0,a.Wm)(H,{name:"姓名",class:"invalid-feedback"})]),(0,a._)("div",k,[V,(0,a.Wm)(F,{name:"email",id:"email",type:"email",rules:"required|email",class:(0,s.C_)(["form-control",{"is-invalid":e["email"]}]),modelValue:E.order.user.email,"onUpdate:modelValue":l[2]||(l[2]=e=>E.order.user.email=e),placeholder:"填入 Email"},null,8,["class","modelValue"]),(0,a.Wm)(H,{name:"email",class:"invalid-feedback"})]),(0,a._)("div",x,[z,(0,a.Wm)(F,{name:"電話",id:"tel",type:"tel",rules:"required|numeric|min:7|max:10",class:(0,s.C_)(["form-control",{"is-invalid":e["電話"]}]),modelValue:E.order.user.tel,"onUpdate:modelValue":l[3]||(l[3]=e=>E.order.user.tel=e)},null,8,["class","modelValue"]),(0,a.Wm)(H,{name:"電話",class:"invalid-feedback"})]),(0,a._)("div",W,[$,(0,a.Wm)(F,{name:"地址",id:"address",type:"text",rules:"required",class:(0,s.C_)(["form-control",{"is-invalid":e["地址"]}]),modelValue:E.order.user.address,"onUpdate:modelValue":l[4]||(l[4]=e=>E.order.user.address=e)},null,8,["class","modelValue"]),(0,a.Wm)(H,{name:"地址",class:"invalid-feedback"})]),(0,a._)("div",q,[U,(0,a.Wm)(F,{as:"textarea",name:"message",id:"message",class:"form-control",rows:"3",modelValue:E.order.message,"onUpdate:modelValue":l[5]||(l[5]=e=>E.order.message=e)},null,8,["modelValue"])]),D])),_:1},8,["onSubmit"])])])])}var E={data(){return{carts:[],order:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCarts(){const e="https://vue3-course-api.hexschool.io/v2/api/groen/cart";this.$http.get(e).then((e=>{this.carts=e.data.data.carts,console.log(this.carts)})).catch((e=>{alert(e.response.data.message)}))},clearCarts(){const e="https://vue3-course-api.hexschool.io/v2/api/groen/carts";this.$http.delete(e).then((e=>{alert(e.data.message),this.getCarts()})).catch((e=>{alert(e.response.data.message)}))},delCart(e){const l=`https://vue3-course-api.hexschool.io/v2/api/groen/cart/${e}`;this.$http.delete(l).then((e=>{alert(e.data.message),this.getCarts()})).catch((e=>{alert(e.response.data.message)}))},onSubmit(){const e="https://vue3-course-api.hexschool.io/v2/api/groen/order";this.$http.post(e,{data:{...this.order}}).then((e=>{alert(e.data.message),this.getCarts(),this.$refs.form.resetForm()})).catch((e=>{alert(e.response.data.message)}))}},mounted(){this.getCarts()}},j=t(3744);const F=(0,j.Z)(E,[["render",S]]);var H=F}}]);
//# sourceMappingURL=351.3e2b516b.js.map