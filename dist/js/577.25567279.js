"use strict";(self["webpackChunkleftyprint"]=self["webpackChunkleftyprint"]||[]).push([[577],{2577:function(t,l,e){e.r(l),e.d(l,{default:function(){return dl}});var a=e(6252),o=e(3577);const n={key:1,class:"container"},i={class:"text-end"},s={class:"table"},d=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("td",null,"No"),(0,a._)("td",null,"類別"),(0,a._)("td",null,"產品名稱"),(0,a._)("td",null,"單/雙面"),(0,a._)("td",null,"尺寸"),(0,a._)("td",null,"材質"),(0,a._)("td",null,"數量"),(0,a._)("td",null,"售價"),(0,a._)("td",null,"顯示"),(0,a._)("td")])],-1),c=["src"],r={class:"badge text-bg-secondary"},u=(0,a._)("br",null,null,-1),p=["onClick"],m=["checked"],h={key:0,class:"form-check-label",for:"is_enabled"},_={key:1,class:"form-check-label",for:"is_enabled"},b={class:"text-end"},g=["onClick"],f=(0,a.Uk)("  "),w=["onClick"],P=(0,a.Uk)("  "),y=["onClick"];function v(t,l,e,v,k,M){const U=(0,a.up)("v-loading"),$=(0,a.up)("pagination"),C=(0,a.up)("productModal"),x=(0,a.up)("delProductModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[k.isLoading?((0,a.wg)(),(0,a.j4)(U,{key:0,active:k.isLoading},null,8,["active"])):((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",i,[(0,a._)("button",{type:"button",class:"btn btn-dark",onClick:l[0]||(l[0]=t=>M.openModal("new"))}," 新增 ")]),(0,a._)("table",s,[d,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.allProducts,(t=>((0,a.wg)(),(0,a.iD)("tr",{key:t.id},[(0,a._)("td",null,(0,o.zw)(t.num),1),(0,a._)("td",null,[(0,a._)("img",{src:t.imageUrl,height:"100",alt:""},null,8,c)]),(0,a._)("td",null,[(0,a._)("span",r,(0,o.zw)(t.category),1),u,(0,a.Uk)(" "+(0,o.zw)(t.title),1)]),(0,a._)("td",null,(0,o.zw)(t.side),1),(0,a._)("td",null,(0,o.zw)(t.width)+" mm X "+(0,o.zw)(t.height)+" mm",1),(0,a._)("td",null,(0,o.zw)(t.material),1),(0,a._)("td",null,(0,o.zw)(t.p_qty)+" "+(0,o.zw)(t.unit),1),(0,a._)("td",null,"$ "+(0,o.zw)(t.price),1),(0,a._)("td",null,[(0,a._)("div",{class:"form-check form-switch",onClick:l=>{t.is_enabled?t.is_enabled=0:t.is_enabled=1,M.updateProduct(t)}},[(0,a._)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"is_enabled",checked:1===t.is_enabled},null,8,m),1===t.is_enabled?((0,a.wg)(),(0,a.iD)("label",h,"顯示")):((0,a.wg)(),(0,a.iD)("label",_,"隱藏"))],8,p)]),(0,a._)("td",b,[(0,a._)("button",{type:"button",class:"btn btn-sm btn-outline-dark",onClick:l=>M.openModal("edit",t)}," 編輯",8,g),f,(0,a._)("button",{type:"button",class:"btn btn-sm btn-outline-dark",onClick:l=>M.copyProduct(t)}," 複製",8,w),P,(0,a._)("button",{type:"button",class:"btn btn-sm btn-outline-danger",onClick:l=>M.openModal("delete",t)}," 刪除 ",8,y)])])))),128))])])])),(0,a.Wm)($,{pages:k.pagination,onEmitPages:M.getProducts},null,8,["pages","onEmitPages"]),(0,a.Wm)(C,{"is-new":k.isNew,"product-item":k.product,ref:"callModal",onUpdateProduct:M.updateProduct},null,8,["is-new","product-item","onUpdateProduct"]),(0,a.Wm)(x,{"product-item":k.product,ref:"callDelModal",onDelProduct:M.delProduct},null,8,["product-item","onDelProduct"])],64)}var k=e(9963);const M={"aria-label":"Page navigation example"},U={class:"pagination"},$=(0,a._)("span",{"aria-hidden":"true"},"«",-1),C=[$],x=["onClick"],D=(0,a._)("span",{"aria-hidden":"true"},"»",-1),V=[D];function N(t,l,e,n,i,s){return(0,a.wg)(),(0,a.iD)("nav",M,[(0,a._)("ul",U,[(0,a._)("li",{class:(0,o.C_)(["page-item",{disabled:!e.pages.has_pre}])},[(0,a._)("a",{class:"page-link",href:"#",onClick:l[0]||(l[0]=(0,k.iM)((t=>s.emitPages(e.pages.current_page-1)),["prevent"]))},C)],2),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.pages.total_pages,(t=>((0,a.wg)(),(0,a.iD)("li",{class:(0,o.C_)(["page-item",{active:e.pages.current_page===t}]),key:t},[(0,a._)("a",{class:"page-link",href:"#",onClick:(0,k.iM)((l=>s.emitPages(t)),["prevent"])},(0,o.zw)(t),9,x)],2)))),128)),(0,a._)("li",{class:(0,o.C_)(["page-item",{disabled:!e.pages.has_next}])},[(0,a._)("a",{class:"page-link",href:"#",onClick:l[1]||(l[1]=(0,k.iM)((t=>s.emitPages(e.pages.current_page+1)),["prevent"]))},V)],2)])])}var I={props:["pages"],methods:{emitPages(t){console.log("emitPages",t),this.$emit("emitPages",t)}}},z=e(3744);const L=(0,z.Z)(I,[["render",N]]);var q=L;const E={class:"modal fade",ref:"productModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},A={class:"modal-dialog modal-xl"},O={class:"modal-content"},H={class:"modal-header"},J={key:0,class:"modal-title"},S={key:1,class:"modal-title"},Y=(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Z={class:"modal-body"},K={class:"row"},W={class:"col-3"},j={class:"mb-4"},B=(0,a._)("p",null,"主圖",-1),G=["src"],X=(0,a._)("p",null,"詳細圖片",-1),F=["src"],Q={class:"input-group mb-3"},R={class:"col"},T={class:"mb-3"},tt={class:"row mb-3"},lt={class:"col-3"},et=(0,a._)("label",{for:"category",class:"form-label"},"類別",-1),at={class:"col-2 align-self-end"},ot=["checked"],nt={key:0,class:"form-check-label",for:"is_enabled"},it={key:1,class:"form-check-label",for:"is_enabled"},st={class:"row mb-3"},dt={class:"col-6"},ct=(0,a._)("label",{for:"title",class:"form-label"},"產品名稱",-1),rt={class:"col-6 align-self-end"},ut={class:"form-check form-check-inline"},pt=(0,a._)("label",{class:"form-check-label",for:"single"},"單面",-1),mt={class:"form-check form-check-inline"},ht=(0,a._)("label",{class:"form-check-label",for:"double"},"雙面",-1),_t={class:"mb-3"},bt=(0,a._)("label",{for:"content",class:"form-label"},"產品簡述",-1),gt={class:"mb-3"},ft=(0,a._)("label",{for:"description",class:"form-label"},"產品介紹",-1),wt=(0,a._)("div",{class:"my-4 border-top"},null,-1),Pt={class:"row g-2 mb-3"},yt={class:"col-3"},vt=(0,a._)("label",{for:"width",class:"form-label"},"寬(mm)",-1),kt={class:"col-3"},Mt=(0,a._)("label",{for:"height",class:"form-label"},"高(mm)",-1),Ut={class:"row g-2 mb-3"},$t={class:"col"},Ct=(0,a._)("label",{for:"material",class:"form-label"},"材質",-1),xt={class:"col-4"},Dt=(0,a._)("label",{for:"qty",class:"form-label"},"數量",-1),Vt={class:"col-2"},Nt=(0,a._)("label",{for:"unit",class:"form-label"},"單位",-1),It={class:"row g-2 mb-3"},zt={class:"col-3"},Lt=(0,a._)("label",{for:"origin_price",class:"form-label"},"原價",-1),qt={class:"input-group"},Et=(0,a._)("span",{class:"input-group-text"},"$",-1),At={class:"col-3"},Ot=(0,a._)("label",{for:"price",class:"form-label"},"售價",-1),Ht={class:"input-group"},Jt=(0,a._)("span",{class:"input-group-text"},"$",-1),St={class:"modal-footer"},Yt=(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);function Zt(t,l,e,n,i,s){return(0,a.wg)(),(0,a.iD)("div",E,[(0,a._)("div",A,[(0,a._)("div",O,[(0,a._)("div",H,[i.innIsNew?((0,a.wg)(),(0,a.iD)("h5",J,"新增產品")):((0,a.wg)(),(0,a.iD)("h5",S,(0,o.zw)(i.innProduct.title),1)),Y]),(0,a._)("div",Z,[(0,a._)("div",K,[(0,a._)("div",W,[(0,a._)("div",j,[B,(0,a._)("img",{class:"img-fluid",src:i.innProduct.imageUrl,alt:""},null,8,G),(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",placeholder:"圖片網址","onUpdate:modelValue":l[0]||(l[0]=t=>i.innProduct.imageUrl=t)},null,512),[[k.nr,i.innProduct.imageUrl]])]),(0,a._)("div",null,[X,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.innProduct.imagesUrl,((t,l)=>((0,a.wg)(),(0,a.iD)("img",{class:"img-fluid",src:t,key:l,alt:""},null,8,F)))),128)),(0,a._)("div",Q,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",placeholder:"圖片網址","onUpdate:modelValue":l[1]||(l[1]=t=>i.addImage=t)},null,512),[[k.nr,i.addImage]]),(0,a._)("button",{class:"btn btn-outline-secondary",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=t=>i.innProduct.imagesUrl.push(i.addImage))},"新增圖片")])])]),(0,a._)("div",R,[(0,a._)("div",T,(0,o.zw)(i.innProduct.num),1),(0,a._)("div",tt,[(0,a._)("div",lt,[et,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":l[3]||(l[3]=t=>i.innProduct.category=t),placeholder:"輸入類別"},null,512),[[k.nr,i.innProduct.category]])]),(0,a._)("div",at,[(0,a._)("div",{class:"form-check form-switch",onClick:l[4]||(l[4]=t=>i.innProduct.is_enabled?i.innProduct.is_enabled=0:i.innProduct.is_enabled=1)},[(0,a._)("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"is_enabled",checked:1===i.innProduct.is_enabled},null,8,ot),1===i.innProduct.is_enabled?((0,a.wg)(),(0,a.iD)("label",nt,"顯示")):((0,a.wg)(),(0,a.iD)("label",it,"隱藏"))])])]),(0,a._)("div",st,[(0,a._)("div",dt,[ct,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":l[5]||(l[5]=t=>i.innProduct.title=t),placeholder:"輸入標題"},null,512),[[k.nr,i.innProduct.title]])]),(0,a._)("div",rt,[(0,a._)("div",ut,[(0,a.wy)((0,a._)("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":l[6]||(l[6]=t=>i.innProduct.side=t),id:"single",value:"單面"},null,512),[[k.G2,i.innProduct.side]]),pt]),(0,a._)("div",mt,[(0,a.wy)((0,a._)("input",{class:"form-check-input",type:"radio","onUpdate:modelValue":l[7]||(l[7]=t=>i.innProduct.side=t),id:"double",value:"雙面"},null,512),[[k.G2,i.innProduct.side]]),ht])])]),(0,a._)("div",_t,[bt,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":l[8]||(l[8]=t=>i.innProduct.content=t),placeholder:"輸入產品簡述"},null,512),[[k.nr,i.innProduct.content]])]),(0,a._)("div",gt,[ft,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":l[9]||(l[9]=t=>i.innProduct.description=t),placeholder:"輸入產飲介紹"},null,512),[[k.nr,i.innProduct.description]])]),wt,(0,a._)("div",Pt,[(0,a._)("div",yt,[vt,(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"width","onUpdate:modelValue":l[10]||(l[10]=t=>i.innProduct.width=t),placeholder:"輸入寬"},null,512),[[k.nr,i.innProduct.width,void 0,{number:!0}]])]),(0,a._)("div",kt,[Mt,(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"height","onUpdate:modelValue":l[11]||(l[11]=t=>i.innProduct.height=t),placeholder:"輸入高"},null,512),[[k.nr,i.innProduct.height,void 0,{number:!0}]])])]),(0,a._)("div",Ut,[(0,a._)("div",$t,[Ct,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"material","onUpdate:modelValue":l[12]||(l[12]=t=>i.innProduct.material=t),placeholder:"輸入材質"},null,512),[[k.nr,i.innProduct.material]])]),(0,a._)("div",xt,[Dt,(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"qty","onUpdate:modelValue":l[13]||(l[13]=t=>i.innProduct.p_qty=t),placeholder:"輸入數量"},null,512),[[k.nr,i.innProduct.p_qty,void 0,{number:!0}]])]),(0,a._)("div",Vt,[Nt,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":l[14]||(l[14]=t=>i.innProduct.unit=t),placeholder:"輸入單位"},null,512),[[k.nr,i.innProduct.unit]])])]),(0,a._)("div",It,[(0,a._)("div",zt,[Lt,(0,a._)("div",qt,[Et,(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"origin_price","onUpdate:modelValue":l[15]||(l[15]=t=>i.innProduct.origin_price=t),placeholder:"輸入原價"},null,512),[[k.nr,i.innProduct.origin_price,void 0,{number:!0}]])])]),(0,a._)("div",At,[Ot,(0,a._)("div",Ht,[Jt,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"price","onUpdate:modelValue":l[16]||(l[16]=t=>i.innProduct.price=t),placeholder:"輸入售價"},null,512),[[k.nr,i.innProduct.price,void 0,{number:!0}]])])])])])])]),(0,a._)("div",St,[Yt,(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:l[17]||(l[17]=t=>s.updateProduct(i.innProduct))},"儲存")])])])],512)}var Kt=e(7424),Wt=e.n(Kt),jt={data(){return{myModal:"",innIsNew:"",innProduct:{width:90,height:54,side:"single",material:"一級卡",p_qty:300,imagesUrl:[]},addImage:""}},props:{isNew:{type:Boolean},productItem:{type:Object}},watch:{isNew(){this.innIsNew=this.isNew},productItem(){this.innProduct=JSON.parse(JSON.stringify(this.productItem))}},methods:{showModal(){this.myModal.show()},hideModal(){this.myModal.hide()},updateProduct(t){this.$emit("updateProduct",t)}},mounted(){this.myModal=new(Wt())(this.$refs.productModal),this.innIsNew=this.isNew,this.innProduct=JSON.parse(JSON.stringify(this.productItem))}};const Bt=(0,z.Z)(jt,[["render",Zt]]);var Gt=Bt;const Xt={class:"modal fade",ref:"delModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Ft={class:"modal-dialog"},Qt={class:"modal-content"},Rt=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title",id:"exampleModalLabel"},"刪除"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Tt={class:"modal-body"},tl={class:"modal-footer"},ll=(0,a._)("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"},"取消",-1);function el(t,l,e,n,i,s){return(0,a.wg)(),(0,a.iD)("div",Xt,[(0,a._)("div",Ft,[(0,a._)("div",Qt,[Rt,(0,a._)("div",Tt," 確定要刪除 "+(0,o.zw)(i.innProduct.title)+" ? ",1),(0,a._)("div",tl,[ll,(0,a._)("button",{type:"button",class:"btn btn-danger",onClick:l[0]||(l[0]=t=>s.delProduct(i.innProduct.id))},"刪除")])])])],512)}var al={data(){return{myModal:"",innProduct:{}}},props:["productItem"],watch:{productItem(){this.innProduct=this.productItem}},methods:{showModal(){this.myModal.show()},hideModal(){this.myModal.hide()},delProduct(t){this.$emit("delProduct",t)}},mounted(){this.myModal=new(Wt())(this.$refs.delModal),this.innProduct=this.productItem}};const ol=(0,z.Z)(al,[["render",el]]);var nl=ol,il={data(){return{VUE_APP:"https://vue3-course-api.hexschool.io/v2/api/groen",isLoading:!0,isNew:!1,allProducts:[],product:{width:90,height:54,side:"single",material:"一級卡",p_qty:300,imagesUrl:[]},pagination:{}}},components:{pagination:q,productModal:Gt,delProductModal:nl},methods:{getProducts(t=1){const l=`${this.VUE_APP}/admin/products?page=${t}`;this.$http.get(l).then((t=>{this.isLoading=!1,this.allProducts=t.data.products,this.pagination=t.data.pagination})).catch((t=>{this.isLoading=!1,alert(t.response.data.message),this.$router.push("/login")}))},updateProduct(t){const l={...t};let e=`${this.VUE_APP}/admin/product`,a="post";this.isNew||(a="put",e=`${e}/${t.id}`),this.$http[a](e,{data:l}).then((t=>{this.hideModal(),alert(t.data.message),this.getProducts()})).catch((t=>{alert(t.response.data.message)}))},copyProduct(t){const l={...t},e=`${this.VUE_APP}/admin/product`;this.$http.post(e,{data:l}).then((t=>{this.getProducts()})).catch((t=>{alert(t.response.data.message)}))},delProduct(t){const l=`${this.VUE_APP}/admin/product/${t}`;this.$http.delete(l).then((t=>{this.hideModal(),this.getProducts()})).catch((t=>{alert(t.response.data.message)}))},openModal(t,l){"new"===t?(this.product={imagesUrl:[],side:"單面",is_enabled:1},this.$refs.callModal.showModal(),this.isNew=!0):"edit"===t?(this.product={...l},this.$refs.callModal.showModal(),this.isNew=!1):"delete"===t&&(this.product={...l},this.$refs.callDelModal.showModal())},hideModal(){this.$refs.callModal.hideModal(),this.$refs.callDelModal.hideModal()}},mounted(){this.getProducts()}};const sl=(0,z.Z)(il,[["render",v]]);var dl=sl}}]);
//# sourceMappingURL=577.25567279.js.map