"use strict";(self["webpackChunkleftyprint"]=self["webpackChunkleftyprint"]||[]).push([[623],{4751:function(e,s,t){function a(e){return{all:e=e||new Map,on:function(s,t){var a=e.get(s);a?a.push(t):e.set(s,[t])},off:function(s,t){var a=e.get(s);a&&(t?a.splice(a.indexOf(t)>>>0,1):e.set(s,[]))},emit:function(s,t){var a=e.get(s);a&&a.slice().map((function(e){e(t)})),(a=e.get("*"))&&a.slice().map((function(e){e(s,t)}))}}}t.d(s,{Z:function(){return i}});const l=a();var i=l},9802:function(e,s,t){t.d(s,{Z:function(){return d}});var a=t(6252);function l(e,s,t,l,i,r){return(0,a.wg)(),(0,a.iD)("div")}var i=t(4751),r={data(){return{data:{position:"top",toast:!0,icon:"success",title:"",showConfirmButton:!1,timer:1500}}},methods:{showAlert(e){this.$swal(e)}},mounted(){i.Z.on("sweetalert",(e=>{const s=e.split(", ");this.data.title=s[0],this.data.icon=s[1],this.$swal.fire(this.data)}))},unmounted(){i.Z.off("sweetalert")}},o=t(3744);const n=(0,o.Z)(r,[["render",l]]);var d=n},6623:function(e,s,t){t.r(s),t.d(s,{default:function(){return ce}});var a=t(6252),l=t(3577),i=t(9963);const r={class:"container mt-5"},o=(0,a._)("h1",{class:"fs-3 text-dark text-center"},[(0,a._)("span",{class:"align-middle"},"購物車")],-1),n={class:"row g-4"},d={class:"col-lg-8 col-12"},c={class:"mb-3 border"},m={class:"px-4 py-2 bg-gray-100 fw-bold d-flex justify-content-between border-bottom"},u=(0,a._)("span",{class:"text-primary"},"項目",-1),f=["disabled"],h={key:0,class:"p-4 text-secondary"},p={key:1},g={class:"d-xl-flex"},v={class:"mb-xl-0 mb-4 me-3"},_={key:0,style:{height:"100px"}},b={key:1},w=["src"],y=(0,a.Uk)("  "),x=["src"],$={class:"fw-bold mb-2"},k=(0,a._)("br",null,null,-1),C={class:"text-secondary fs-7"},V=(0,a._)("br",null,null,-1),Z={class:"text-nowrap"},L=["onClick"],U=(0,a._)("span",{class:"material-symbols-outlined align-middle"},"delete",-1),W=[U],z={class:"border"},P=(0,a._)("div",{class:"px-4 py-2 text-primary fw-bold bg-gray-100"}," 收件人 ",-1),A={class:"py-4 row justify-content-center"},D={class:"col-xl-6 col-sm-8 col-10"},E={class:"mb-2"},j=(0,a._)("label",{for:"name",class:"form-label fs-7"},"姓名",-1),q={class:"mb-2"},S=(0,a._)("label",{for:"email",class:"form-label fs-7"},"Email",-1),M={class:"mb-2"},H=(0,a._)("label",{for:"tel",class:"form-label fs-7"},"電話",-1),Y={class:"mb-2"},B=(0,a._)("label",{for:"address",class:"form-label fs-7"},"地址",-1),F={class:"mb-2"},K=(0,a._)("label",{for:"message",class:"form-label fs-7"},"訂單備註",-1),O={class:"col-lg col-12"},X={class:"border bg-gray-100 sticky-top"},G=(0,a._)("div",{class:"p-2 text-center bg-gray-200"}," 訂單摘要 ",-1),I={class:"p-3"},J={class:"d-flex justify-content-between"},N=(0,a._)("div",null,"商品總計",-1),Q=(0,a._)("div",{class:"d-flex justify-content-between"},[(0,a._)("div",null,"運費總計"),(0,a._)("div",null,"免運費")],-1),R={class:"p-3 d-flex justify-content-between"},T=(0,a._)("div",null,"結帳總金額",-1),ee={class:"fw-bolder text-danger"},se=(0,a.Uk)("$ "),te={class:"fs-5"},ae=(0,a._)("div",{class:"d-grid p-3"},[(0,a._)("button",{type:"submit",class:"btn btn-primary"},"結帳")],-1);function le(e,s,t,U,le,ie){const re=(0,a.up)("v-loading"),oe=(0,a.up)("SweetAlert"),ne=(0,a.up)("v-field"),de=(0,a.up)("error-message"),ce=(0,a.up)("v-form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(re,{active:le.isLoading},null,8,["active"]),(0,a.Wm)(oe),(0,a._)("div",r,[o,(0,a.Wm)(ce,{ref:"form",onSubmit:ie.onSubmit},{default:(0,a.w5)((({errors:e})=>[(0,a._)("div",n,[(0,a._)("div",d,[(0,a._)("div",c,[(0,a._)("div",m,[u,(0,a._)("button",{class:"btn btn-sm btn-outline-secondary",onClick:s[0]||(s[0]=e=>ie.clearCarts()),disabled:le.carts.length<=0},"清除購物車",8,f)]),(0,a._)("div",null,[le.carts.length<=0?((0,a.wg)(),(0,a.iD)("p",h,"購物車尚無內容")):((0,a.wg)(),(0,a.iD)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(le.carts,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"p-4 d-flex justify-content-between align-items-center"},[(0,a._)("div",g,[(0,a._)("div",v,[void 0===e.files?((0,a.wg)(),(0,a.iD)("div",_,"   ")):((0,a.wg)(),(0,a.iD)("div",b,[(0,a._)("img",{src:e.files[0].front,class:"border",height:"100",alt:""},null,8,w),y,(0,a._)("img",{src:e.files[0].back,class:"border",height:"100",alt:""},null,8,x)]))]),(0,a._)("div",null,[(0,a._)("span",$,(0,l.zw)(e.product.title),1),k,(0,a._)("span",C,[(0,a.Uk)((0,l.zw)(e.product.width)+" mm X "+(0,l.zw)(e.product.height)+" mm ",1),V,(0,a.Uk)(" "+(0,l.zw)(e.product.side)+" ／ "+(0,l.zw)(e.product.material)+" ／ "+(0,l.zw)(e.product.p_qty)+" "+(0,l.zw)(e.product.unit),1)])])]),(0,a._)("div",Z,"$ "+(0,l.zw)(e.product.price),1),(0,a._)("div",null,[(0,a._)("a",{href:"#",class:"btn btn-sm btn-link",onClick:(0,i.iM)((s=>ie.delCart(e,e.files[0].id)),["prevent"])},W,8,L)])])))),128))]))])]),(0,a._)("div",z,[P,(0,a._)("div",A,[(0,a._)("div",D,[(0,a._)("div",E,[j,(0,a.Wm)(ne,{name:"姓名",id:"name",type:"text",rules:"required",class:(0,l.C_)(["form-control",{"is-invalid":e["姓名"]}]),modelValue:le.order.user.name,"onUpdate:modelValue":s[1]||(s[1]=e=>le.order.user.name=e),placeholder:"填入姓名"},null,8,["class","modelValue"]),(0,a.Wm)(de,{name:"姓名",class:"invalid-feedback"})]),(0,a._)("div",q,[S,(0,a.Wm)(ne,{name:"email",id:"email",type:"email",rules:"required|email",class:(0,l.C_)(["form-control",{"is-invalid":e["email"]}]),modelValue:le.order.user.email,"onUpdate:modelValue":s[2]||(s[2]=e=>le.order.user.email=e),placeholder:"填入 Email"},null,8,["class","modelValue"]),(0,a.Wm)(de,{name:"email",class:"invalid-feedback"})]),(0,a._)("div",M,[H,(0,a.Wm)(ne,{name:"電話",id:"tel",type:"tel",rules:"required|numeric|min:7|max:10",class:(0,l.C_)(["form-control",{"is-invalid":e["電話"]}]),modelValue:le.order.user.tel,"onUpdate:modelValue":s[3]||(s[3]=e=>le.order.user.tel=e)},null,8,["class","modelValue"]),(0,a.Wm)(de,{name:"電話",class:"invalid-feedback"})]),(0,a._)("div",Y,[B,(0,a.Wm)(ne,{name:"地址",id:"address",type:"text",rules:"required",class:(0,l.C_)(["form-control",{"is-invalid":e["地址"]}]),modelValue:le.order.user.address,"onUpdate:modelValue":s[4]||(s[4]=e=>le.order.user.address=e)},null,8,["class","modelValue"]),(0,a.Wm)(de,{name:"地址",class:"invalid-feedback"})]),(0,a._)("div",F,[K,(0,a.Wm)(ne,{as:"textarea",name:"message",id:"message",class:"form-control",rows:"3",modelValue:le.order.message,"onUpdate:modelValue":s[5]||(s[5]=e=>le.order.message=e)},null,8,["modelValue"])])])])])]),(0,a._)("div",O,[(0,a._)("div",X,[G,(0,a._)("div",I,[(0,a._)("div",J,[N,(0,a._)("div",null,"$ "+(0,l.zw)(le.total),1)]),Q]),(0,a._)("div",R,[T,(0,a._)("div",ee,[se,(0,a._)("span",te,(0,l.zw)(Math.round(le.final_total)),1)])]),ae])])])])),_:1},8,["onSubmit"])])],64)}var ie=t(4751),re=t(9802),oe={data(){return{VUE_APP:"https://vue3-course-api.hexschool.io/v2/api/groen",isLoading:!1,total:0,final_total:0,carts:[],order:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{SweetAlert:re.Z},methods:{getCarts(){this.isLoading=!0;const e=`${this.VUE_APP}/cart`;this.$http.get(e).then((e=>{console.log(e.data.data),this.isLoading=!1,this.total=e.data.data.total,this.final_total=e.data.data.final_total;const s=e.data.data.carts,t=[];s.forEach((e=>{if(void 0===e.files||e.files.length<=1)t.push(e);else{const s=e.files.length;for(let a=0;a<s;a++){const s={...e};s.files=[e.files[a]],s.files[0].id=a+1,t.push(s)}}})),this.carts=t,ie.Z.emit("cartCount")})).catch((e=>{this.isLoading=!1,ie.Z.emit("sweetalert",`${e.response.data.message}, error`)}))},clearCarts(){this.isLoading=!0;const e=`${this.VUE_APP}/carts`;this.$http.delete(e).then((e=>{this.isLoading=!1,ie.Z.emit("sweetalert",`${e.data.message}, success`),this.getCarts()})).catch((e=>{this.isLoading=!1,ie.Z.emit("sweetalert",`${e.response.data.message}, error`)}))},delCart(e,s){this.isLoading=!0;const t=`${this.VUE_APP}/cart`;this.$http.get(t).then((t=>{const a=t.data.data.carts,l=a.find((s=>s.product_id===e.product_id));if(void 0===l.files||l.files.length<=1){const s=`https://vue3-course-api.hexschool.io/v2/api/groen/cart/${e.id}`;this.$http.delete(s).then((e=>{this.isLoading=!1,ie.Z.emit("sweetalert",`${e.data.message}, success`),this.getCarts()})).catch((e=>{this.isLoading=!1,ie.Z.emit("sweetalert",`${e.response.data.message}, error`)}))}else{l.files.splice(s-1,1);const t=`https://vue3-course-api.hexschool.io/v2/api/groen/cart/${e.id}`;this.$http.put(t,{data:{product_id:l.id,qty:1,files:l.files}}).then((e=>{this.isLoading=!1,ie.Z.emit("sweetalert",`${e.data.message}, success`),this.getCarts()})).catch((e=>{this.isLoading=!1,ie.Z.emit("sweetalert",`${e.response.data.message}, error`)}))}})).catch((e=>{this.isLoading=!1,ie.Z.emit("sweetalert",`${e.response.data.message}, error`)}))},onSubmit(){this.isLoading=!0;const e=`${this.VUE_APP}/order`;this.$http.post(e,{data:{...this.order}}).then((e=>{this.isLoading=!1,ie.Z.emit("sweetalert",`${e.data.message}, success`),this.getCarts(),this.$refs.form.resetForm()})).catch((e=>{this.isLoading=!1,ie.Z.emit("sweetalert",`${e.response.data.message}, error`)}))}},mounted(){this.getCarts()}},ne=t(3744);const de=(0,ne.Z)(oe,[["render",le]]);var ce=de}}]);
//# sourceMappingURL=623.4c446995.js.map