"use strict";(self["webpackChunkleftyprint"]=self["webpackChunkleftyprint"]||[]).push([[69],{7069:function(t,i,e){e.r(i),e.d(i,{default:function(){return y}});var r=e(6252),s=e(3577),n=e(9963);const o={class:"container"},l={class:"row"},d={class:"col d-flex flex-column justify-content-end"},c=(0,r._)("div",{class:"col-4"},null,-1),u=(0,r._)("hr",null,null,-1),h={class:"mb-3"},a=(0,r._)("p",null,"尺寸 (size)",-1),p=["onClick"],_={class:"mb-3"},g=(0,r._)("p",null,"單/雙面 (side)",-1),w=["onClick"],P={class:"position-relative",style:{"min-height":"100px"}},z={class:"table"},f=(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",null,"size"),(0,r._)("th",null,"side"),(0,r._)("th",null,"材質"),(0,r._)("th",null,"數量"),(0,r._)("th",null,"origin_price"),(0,r._)("th",null,"Price"),(0,r._)("th",null,"ID")])],-1);function v(t,i,e,v,m,b){const S=(0,r.up)("v-loading"),y=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",l,[(0,r._)("div",d,[(0,r._)("p",null,(0,s.zw)(m.currProd.title),1),(0,r._)("p",null,(0,s.zw)(m.currProd.description),1)]),c]),u,(0,r._)("div",h,[a,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(m.sizeList,((t,i)=>((0,r.wg)(),(0,r.iD)("a",{href:"#",key:`size${i}`,onClick:(0,n.iM)((i=>b.checkSizeAndSide("size",t)),["prevent"]),class:(0,s.C_)(["btn btn-sm rounded-pill me-2",[this.currSize===t?"btn-secondary":"btn-outline-secondary"]])},(0,s.zw)(t),11,p)))),128))]),(0,r._)("div",_,[g,((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(m.sideList,((t,i)=>((0,r.wg)(),(0,r.iD)("a",{href:"#",key:`side${i}`,onClick:(0,n.iM)((i=>b.checkSizeAndSide("side",t)),["prevent"]),class:(0,s.C_)(["btn btn-sm rounded-pill me-2",[this.currProd.content.side===t?"btn-secondary":"btn-outline-secondary"]])},(0,s.zw)(t),11,w)))),128))]),(0,r._)("div",P,[(0,r.Wm)(S,{active:m.isLoading},null,8,["active"]),(0,r._)("table",z,[f,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(m.sortProds,(t=>((0,r.wg)(),(0,r.iD)("tr",{key:t.id,class:(0,s.C_)({"bg-light":this.currProd.id===t.id})},[(0,r._)("th",null,(0,s.zw)(t.content.width)+"x"+(0,s.zw)(t.content.height),1),(0,r._)("td",null,(0,s.zw)(t.content.side),1),(0,r._)("td",null,(0,s.zw)(t.content.material),1),(0,r._)("td",null,(0,s.zw)(t.content.qty),1),(0,r._)("td",null,"$ "+(0,s.zw)(t.origin_price),1),(0,r._)("td",null,[(0,r.Wm)(y,{to:`/product/${t.id}`},{default:(0,r.w5)((()=>[(0,r.Uk)("$ "+(0,s.zw)(t.price),1)])),_:2},1032,["to"])]),(0,r._)("td",null,(0,s.zw)(t.id),1)],2)))),128))])])]),(0,r._)("p",null,"NT$ "+(0,s.zw)(m.currProd.price),1),(0,r._)("a",{href:"#",class:"btn btn-secondary",onClick:i[0]||(i[0]=(0,n.iM)((i=>t.addToCart()),["prevent"]))},"Add to cart")])}var m={data(){return{isLoading:!0,VUE_APP:"https://vue3-course-api.hexschool.io/v2/api/groen",currProd:{},currProds:[],sortProds:[],currSize:"",currSide:"",carts:[],sizeList:[],sideList:[]}},computed:{prodId(){return console.log("computed"),this.$route.params.id}},watch:{prodId(){console.log("watch"),this.getProds()}},methods:{getProds(){const t=`${this.VUE_APP}/products/all`;this.$http.get(t).then((t=>{const i=t.data.products;this.currProd=i.find((t=>t.id===this.prodId)),this.currSize=`${this.currProd.content.width}x${this.currProd.content.height}`,this.currSide=this.currProd.content.side,this.currProds=i.filter((t=>t.title===this.currProd.title)),this.showSizeAndSide(),this.getSortProds(),this.isLoading=!1})).catch((t=>{alert(t.response.data.message)}))},checkSizeAndSide(t,i){if("size"===t){const t=i.split("x");this.currSize=`${t[0]}x${t[1]}`}else"side"===t&&(this.currSide=i);this.getSortProds(),this.currProd={...this.sortProds[0]},this.$router.push(`/product/${this.currProd.id}`)},getSortProds(){const t=this.currProds.filter(((t,i)=>{const e=t.content,r=this.currSize.split("x");return e.width===Number(r[0])&&e.height===Number(r[1])&&e.side===this.currSide})),i=t.map(((t,i)=>({index:i,value:t})));i.sort(((t,i)=>t.value.content.qty>i.value.content.qty?1:t.value.content.qty<i.value.content.qty?-1:0)),this.sortProds=i.map((i=>t[i.index]))},showSizeAndSide(){const t=this.currProds.map((t=>`${t.content.width}x${t.content.height}`)),i=this.currProds.map((t=>t.content.side));this.sizeList=t.filter(((i,e)=>t.indexOf(i)===e)),this.sizeList.sort(),this.sideList=i.filter(((t,e)=>i.indexOf(t)===e)),this.sideList.sort()},shallowEqual(t,i){const e=Object.keys(t),r=Object.keys(i);if(e.length!==r.length)return!1;for(let s=0;s<=e.length;s++){const n=t[e[s]],o=i[r[s]];if(n!==o)return!1}return!0}},mounted(){this.getProds()}},b=e(3744);const S=(0,b.Z)(m,[["render",v]]);var y=S}}]);
//# sourceMappingURL=69.14d88eb8.js.map