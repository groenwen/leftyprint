{"version":3,"file":"js/763.6a78c41b.js","mappings":"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","sources":["webpack://leftyprint/./src/views/Dashboard/CouponsView.vue","webpack://leftyprint/./src/components/CouponModal.vue","webpack://leftyprint/./src/components/CouponModal.vue?3d2f","webpack://leftyprint/./src/views/Dashboard/CouponsView.vue?5991"],"sourcesContent":["<template>\n  <v-loading :active=\"isLoading\" v-if=\"isLoading\"></v-loading>\n  <div class=\"container\" v-else>\n    <div class=\"text-end\">\n      <button type=\"button\" class=\"btn btn-dark\" @click=\"openModal('new')\">\n        新增\n      </button>\n    </div>\n    <table class=\"table\">\n      <thead>\n        <th>活動名稱</th>\n        <th>折扣</th>\n        <th>有效期限</th>\n        <th>折扣碼</th>\n        <th>顯示</th>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in coupons\" :key=\"item.id\">\n          <td>{{ item.title }}</td>\n          <td>{{ item.percent }}</td>\n          <td>{{ parseDate(item.due_date) }}</td>\n          <td>{{ item.code }}</td>\n          <td>\n            <div class=\"form-check form-switch\" @click=\"item.is_enabled ? item.is_enabled = 0 : item.is_enabled = 1; updateProduct(item)\">\n              <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"is_enabled\" :checked=\"item.is_enabled === 1\">\n              <label class=\"form-check-label\" for=\"is_enabled\" v-if=\"item.is_enabled === 1\">顯示</label>\n              <label class=\"form-check-label\" for=\"is_enabled\" v-else>隱藏</label>\n            </div>\n          </td>\n          <td class=\"text-end\">\n            <button\n              type=\"button\"\n              class=\"btn btn-sm btn-outline-dark\"\n              @click=\"openModal('edit', item)\">\n              編輯</button>&nbsp;\n            <button type=\"button\" class=\"btn btn-sm btn-outline-danger\" @click=\"openModal('delete', item)\">\n              刪除\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <couponModal :is-new=\"isNew\" :coupon-item=\"coupon\" @update-coupon=\"updateCoupon\" ref=\"callModal\"></couponModal>\n</template>\n<script>\nimport couponModal from '@/components/CouponModal.vue'\nexport default {\n  data () {\n    return {\n      VUE_APP: `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}`,\n      isLoading: false,\n      isNew: false,\n      coupons: [],\n      coupon: {\n        title: '',\n        is_enabled: 1,\n        percent: 80,\n        due_date: 1555459200,\n        code: 'leftyprint2022'\n      }\n    }\n  },\n  components: { couponModal },\n  methods: {\n    getCoupons () {\n      this.$http.get(`${this.VUE_APP}/admin/coupons`)\n        .then((res) => {\n          this.coupons = res.data.coupons\n        })\n        .catch((err) => {\n          alert(err.response.data.message)\n        })\n    },\n    updateCoupon (item) {\n      // 將日期轉為  timestamp 格式\n      item.due_date = new Date(item.due_date).getTime()\n      const data = { ...item }\n      let url = `${this.VUE_APP}/admin/coupon`\n      let http = 'post'\n      if (!this.isNew) {\n        http = 'put'\n        url = `${url}/${item.id}`\n      }\n      this.$http[http](url, { data })\n        .then((res) => {\n          this.hideModal()\n          this.getCoupons()\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    parseDate (dueDate) {\n      const year = new Date(dueDate).getFullYear()\n      const month = new Date(dueDate).getMonth() + 1\n      const date = new Date(dueDate).getDate()\n      return `${year}-${month}-${date}`\n    },\n    // 開啟 modal\n    openModal (active, item) {\n      if (active === 'new') {\n        this.coupon = {\n          is_enabled: 1\n        }\n        this.$refs.callModal.showModal()\n        this.isNew = true\n      } else if (active === 'edit') {\n        // 將日期轉為 yyyy-mm-dd 格式\n        item.due_date = this.parseDate(item.due_date)\n        this.coupon = { ...item }\n\n        // 避免資料互相汙染需用解構賦值\n        this.$refs.callModal.showModal()\n        this.isNew = false\n      } else if (active === 'delete') {\n        this.coupon = { ...item }\n        this.$refs.callDelModal.showModal()\n      }\n    },\n    hideModal () {\n      this.$refs.callModal.hideModal()\n    }\n  },\n  mounted () {\n    this.getCoupons()\n  }\n}\n</script>\n","<template>\n  <div class=\"modal fade\" ref=\"couponModal\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-xl\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header\">\n          <h5 class=\"modal-title\" v-if=\"innIsNew\">新增折扣碼</h5>\n          <h5 class=\"modal-title\" v-else>{{ innCoupon.title }}</h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"mb-3\">\n            <label for=\"title\" class=\"form-label\">活動名稱</label>\n            <input type=\"text\" class=\"form-control\" id=\"title\" v-model=\"innCoupon.title\" placeholder=\"輸入活動\">\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"percent\" class=\"form-label\">折扣</label>\n            <input type=\"number\" class=\"form-control\" id=\"percent\" v-model=\"innCoupon.percent\" placeholder=\"輸入折扣\">\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"due_date\" class=\"form-label\">有效期限</label>\n            <input type=\"date\" class=\"form-control\" id=\"due_date\" v-model=\"innCoupon.due_date\" placeholder=\"輸入有效期限\">\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"code\" class=\"form-label\">折扣碼</label>\n            <input type=\"text\" class=\"form-control\" id=\"code\" v-model=\"innCoupon.code\" placeholder=\"輸入折扣碼\">\n          </div>\n          <div>\n            <div class=\"form-check form-switch\" @click=\"innCoupon.is_enabled ? innCoupon.is_enabled = 0 : innCoupon.is_enabled = 1\">\n              <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" id=\"is_enabled\" :checked=\"innCoupon.is_enabled === 1\">\n              <label class=\"form-check-label\" for=\"is_enabled\" v-if=\"innCoupon.is_enabled === 1\">顯示</label>\n              <label class=\"form-check-label\" for=\"is_enabled\" v-else>隱藏</label>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"updateCoupon(innCoupon)\">儲存</button>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport Modal from 'bootstrap/js/dist/modal.js'\n\nexport default {\n  data () {\n    return {\n      myModal: '',\n      innIsNew: false,\n      innCoupon: {\n        is_enabled: 1\n      }\n    }\n  },\n  props: {\n    isNew: {\n      type: Boolean\n    },\n    couponItem: {\n      type: Object\n    }\n  },\n  watch: {\n    isNew () {\n      this.innIsNew = this.isNew\n    },\n    couponItem () {\n      this.innCoupon = JSON.parse(JSON.stringify(this.couponItem))\n    }\n  },\n  methods: {\n    showModal () {\n      this.myModal.show()\n      console.log(this.innCoupon)\n    },\n    hideModal () {\n      this.myModal.hide()\n    },\n    updateCoupon (item) {\n      this.$emit('updateCoupon', item)\n    }\n  },\n  mounted () {\n    this.myModal = new Modal(this.$refs.couponModal)\n    this.innIsNew = this.isNew\n    this.innCoupon = JSON.parse(JSON.stringify(this.couponItem))\n  }\n}\n</script>\n","import { render } from \"./CouponModal.vue?vue&type=template&id=d8302992\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wendy/Documents/MySelf/leftyprint/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CouponsView.vue?vue&type=template&id=5b0f6204\"\nimport script from \"./CouponsView.vue?vue&type=script&lang=js\"\nexport * from \"./CouponsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/wendy/Documents/MySelf/leftyprint/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","$data","_createBlock","_component_v_loading","active","_createElementBlock","type","onClick","$options","_hoisted_4","_Fragment","_renderList","item","key","id","_toDisplayString","title","percent","due_date","code","is_enabled","_ctx","role","checked","_hoisted_10","_hoisted_12","_createVNode","_component_couponModal","onUpdateCoupon","ref","tabindex","_hoisted_7","$event","placeholder","_hoisted_14","_hoisted_16","_hoisted_21","data","myModal","innIsNew","innCoupon","props","isNew","Boolean","couponItem","Object","watch","this","JSON","parse","stringify","methods","showModal","show","console","log","hideModal","hide","updateCoupon","$emit","mounted","Modal","$refs","couponModal","__exports__","VUE_APP","isLoading","coupons","coupon","components","getCoupons","$http","get","then","res","catch","err","alert","response","message","Date","getTime","url","http","parseDate","dueDate","year","getFullYear","month","getMonth","date","getDate","openModal","callModal","callDelModal","render"],"sourceRoot":""}