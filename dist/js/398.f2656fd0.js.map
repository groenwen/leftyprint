{"version":3,"file":"js/398.f2656fd0.js","mappings":"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","sources":["webpack://leftyprint/./src/views/ProductView.vue","webpack://leftyprint/./src/views/ProductView.vue?f743"],"sourcesContent":["<template>\r\n  <div>\r\n    <p>{{ currProduct.title }}</p>\r\n    {{ currProduct.description }}\r\n    <hr />\r\n    <div class=\"mb-3\">\r\n      <p>尺寸 (size)</p>\r\n      <a\r\n        href=\"#\"\r\n        @click.prevent=\"getProduct('size', item)\"\r\n        v-for=\"(item, index) in sizeList\"\r\n        :key=\"`size${index}`\"\r\n        class=\"btn btn-sm rounded-pill me-2\"\r\n        :class=\"[\r\n          this.currSize === item ? 'btn-secondary' : 'btn-outline-secondary'\r\n        ]\"\r\n        >{{ item }}</a\r\n      >\r\n    </div>\r\n    <div class=\"mb-3\">\r\n      <p>單/雙面 (side)</p>\r\n      <a\r\n        href=\"#\"\r\n        @click.prevent=\"getProduct('side',item)\"\r\n        v-for=\"(item, index) in sideList\"\r\n        :key=\"`side${index}`\"\r\n        class=\"btn btn-sm rounded-pill me-2\"\r\n        :class=\"[\r\n          this.currProduct.content.side === item\r\n            ? 'btn-secondary'\r\n            : 'btn-outline-secondary'\r\n        ]\"\r\n        >{{ item }}</a\r\n      >\r\n    </div>\r\n    <table class=\"table\">\r\n      <thead>\r\n        <tr>\r\n          <th>size</th>\r\n          <th>side</th>\r\n          <th>材質</th>\r\n          <th>數量</th>\r\n          <th>origin_price</th>\r\n          <th>Price</th>\r\n          <th>ID</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"item in sortProducts\" :key=\"item.id\" :class=\"{'bg-light':this.currProduct.id === item.id}\">\r\n          <th>{{ item.content.width }}x{{ item.content.height }}</th>\r\n          <td>{{ item.content.side }}</td>\r\n          <td>{{ item.content.material }}</td>\r\n          <td>{{ item.content.qty }}</td>\r\n          <td>$ {{ item.origin_price }}</td>\r\n          <td><a href=\"#\" @click.prevent=\"getProduct('all', item)\">$ {{ item.price }}</a></td>\r\n          <td>{{ item.id }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <p>NT$ {{currProduct.price}}</p>\r\n    <a href=\"#\" class=\"btn btn-secondary\" @click.prevent=\"addToCart()\">Add to cart</a>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      text: '123',\r\n      currProduct: {},\r\n      currProducts: [],\r\n      sortProducts: [],\r\n      currSize: '',\r\n      sizeList: [],\r\n      sideList: [],\r\n      material: []\r\n    }\r\n  },\r\n  // watch: {\r\n  //   currProduct: {\r\n  //     handler (newVal, oldVal) {\r\n  //       this.sortProduct()\r\n  //       console.log('hello')\r\n  //     },\r\n  //     deep: true\r\n  //   }\r\n  // },\r\n  methods: {\r\n    // 1.顯示所有選項 size side\r\n    // 2. 所有產品 products > 所有 title product\r\n    // 3. 依篩選條件 顯示產品 sortProduct\r\n    // 4. 切換條件時 更新產品列表\r\n    // 所有 size、篩選過的 size、當前 size\r\n    getProduct (str, val) {\r\n      // 取得所有產品\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.$http\r\n        .get(url)\r\n        .then((res) => {\r\n          // 所有產品 ex: 名片、明信片...\r\n          const products = res.data.products\r\n          // 篩選出該產品 ex: 名片\r\n          this.currProducts = products.filter(\r\n            (item) => item.title === this.currProduct.title\r\n          )\r\n          // 顯示該產品所有選項 size side\r\n          this.showSizeSide()\r\n          // 依條件顯示產品 active\r\n          if (str === 'size') {\r\n            const size = val.split('x')\r\n            this.currProduct.content.width = Number(size[0])\r\n            this.currProduct.content.height = Number(size[1])\r\n            this.currSize = `${size[0]}x${size[1]}`\r\n            console.log(this.currProduct)\r\n          } else if (str === 'side') {\r\n            this.currProduct.content.side = val\r\n          } else if (str === 'all') {\r\n            this.currProduct = { ...val }\r\n            console.log(this.currProduct)\r\n          }\r\n          this.sortProduct(str)\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    // 顯示產品的尺寸、單雙面\r\n    showSizeSide () {\r\n      // 取出所有 size, side\r\n      const allSize = []\r\n      const allSide = []\r\n      // size, side 唯一值\r\n      this.currProducts.forEach((item) => {\r\n        // size 組成物件\r\n        const str = `${item.content.width}x${item.content.height}`\r\n        allSize.push(str)\r\n        allSide.push(item.content.side)\r\n      })\r\n      // 取出 size 唯一值\r\n      this.sizeList = allSize.filter((item, index) => allSize.indexOf(item) === index)\r\n      // 取出 side 唯一值\r\n      this.sideList = allSide.filter(\r\n        (item, index) => allSide.indexOf(item) === index\r\n      )\r\n      console.log(this.sideList)\r\n    },\r\n    // 依條件篩選\r\n    sortProduct (str) {\r\n      if (str === 'all') {\r\n        // 選擇 價格 嚴格篩選 跳至對應產品頁\r\n        const choseProduct = this.currProducts.find(item => {\r\n          const iContent = item.content\r\n          const currContent = this.currProduct.content\r\n          // size(寬 高) 單雙面 數量 材質\r\n          return iContent.width === currContent.width && iContent.height === currContent.height && iContent.side === currContent.side && iContent.material === currContent.material && iContent.qty === currContent.qty\r\n        })\r\n        this.currProduct = { ...choseProduct }\r\n      } else {\r\n        // 篩選出當前的選取條件的 products\r\n        this.sortProducts = this.currProducts.filter(item => {\r\n          const iContent = item.content\r\n          const currContent = this.currProduct.content\r\n          return iContent.width === currContent.width && iContent.height === currContent.height && iContent.side === currContent.side\r\n        })\r\n        // 由數量小到大排序\r\n        this.sortProducts.sort((a, b) => {\r\n          return a.content.qty - b.content.qty\r\n        })\r\n        this.currProduct = { ...this.sortProducts[0] }\r\n      }\r\n\r\n      this.$router.push(`/product/${this.currProduct.id}`)\r\n    },\r\n    addToCart () {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`\r\n      this.$http.post(url, { data: { product_id: this.currProduct.id, qty: 1 } })\r\n        .then((res) => {\r\n          alert(res.data.message)\r\n        })\r\n        .catch((err) => {\r\n          console.log(err.response.data.message)\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    const { id } = this.$route.params\r\n    const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/product/${id}`\r\n\r\n    // 依當前產品頁顯示對應的產品資料\r\n    this.$http\r\n      .get(url)\r\n      .then((res) => {\r\n        // 當前產品\r\n        this.currProduct = res.data.product\r\n        // 當前產品尺寸\r\n        this.currSize = `${this.currProduct.content.width}x${this.currProduct.content.height}`\r\n        // 顯示產品列表\r\n        this.getProduct()\r\n      })\r\n      .catch((err) => {\r\n        console.log(err)\r\n      })\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./ProductView.vue?vue&type=template&id=1dbe9e53\"\nimport script from \"./ProductView.vue?vue&type=script&lang=js\"\nexport * from \"./ProductView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\S2004001\\\\Downloads\\\\Hex\\\\leftyprint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","_createElementBlock","_toDisplayString","$data","title","description","_hoisted_1","_hoisted_3","_Fragment","_renderList","item","index","href","onClick","$options","key","currSize","_hoisted_4","_hoisted_6","currProduct","content","side","_hoisted_7","_hoisted_9","id","width","height","material","qty","origin_price","price","_hoisted_10","data","text","currProducts","sortProducts","sizeList","sideList","methods","getProduct","str","val","url","this","$http","get","then","res","products","filter","showSizeSide","size","split","Number","console","log","sortProduct","catch","err","allSize","allSide","forEach","push","indexOf","choseProduct","find","iContent","currContent","sort","a","b","$router","addToCart","post","product_id","alert","message","response","mounted","$route","params","product","__exports__","render"],"sourceRoot":""}